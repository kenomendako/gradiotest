# 📥 タスク・インボックス

思いついたタスクや気づいたバグをここにメモしてください。  
Antigravityが定期的に確認し、優先順位をつけてタスクリストに整理します。

---

## 📝 新規タスク追加（コピペ用）

```markdown
- [ ] [タスク名/問題の説明]
  - 詳細: 
  - 優先度: 🔴高 / 🟡中 / 🟢低
```

---
## 未整理タスク

- [ ] [Web巡回ツールの通知問題・全件チェックの修正]
  - 詳細: Web巡回ツールが直接Discord・Pushoverの通知を送ってくる仕様が不要。通知禁止時間帯も無視して送られてくる。自律行動時のペルソナからの通知に準拠してほしい。通知禁止時間帯厳守で、それ以外の時間はペルソナの判断に任せる。Web巡回ツールはユーザーのための更新チェッカーではなく、ペルソナが最新情報を分析してユーザーに報告するためのものなので、全件チェックなども定時巡回と同じように情報を取得しペルソナに渡す。
  - 優先度: 🔴高 

- [ ] [GeminiAPIキーのローリング？機能]
  - 詳細: 無料APIキーで一日の上限等のエラー出たら次のキーを使う…を繰り返し最後に有料キーを使う。
  - 優先度: 🔴高


- [ ] [Riveの導入検討・アバター動画をユーザーが編集できるか]
  - 詳細: https://zenn.dev/chot/articles/9dfcfb0053ac6a
  - 優先度:

- [ ] [Ollamaをllama.cppに置き換える検討]
  - 詳細: 
  - 優先度:

- [×] [🧠 内的状態 (Internal State)のブラッシュアップ]
  - 詳細: 「❓ 未解決の問い（好奇心の源泉）」が、会話で解決しているように見えてもずっと「未回答」でどんどん問いが増える一方に見える。会話での変化を反映するロジックはどのようになっているのか？
  - 優先度: 🔴高

- [ ] [Google検索を無料GeminiAPIでも使う方法検討]
  - 詳細:無料APIでも2.5 Flashなら検索使えるので、他の最終応答モデルが投げたクエリを2.5 Flashに投げて結果を拾えばいける？
  
- [ ] [ツール結果がログに溜まる問題]
  - 詳細:検索結果やツール使用結果がログに溜まるとコンテキストウインドウ圧迫・APIコスト増なので、何か対策を考えたい。

- [ ] [ウォッチリスト: Tavily Extractエラー]
  - 詳細: `TavilyExtractInput` にURLをリストではなく辞書形式で渡す必要がある。現在 `['https://...']` (list) を渡してpydanticエラーが発生。
  - 優先度: 🟡中

- [ ] [ウォッチリスト: 巡回時刻の一括設定機能]
  - 詳細: 各エントリごとに時刻を設定するのが手間。デフォルト時刻の適用や一括編集機能が欲しい。
  - 優先度: 🟡中 

- [ ] [創作ノートのRAG化]
  - 詳細: 秘密の日記もRAG化する？　でもユーザーに読めない外国語多用なので検索できる？
  - 優先度: 🔴高 

---

### 整理済み（2026-01-06）
- [x] 定期巡回ツールの後ペルソナが情報チェックしても変更が無く何もできない ✅
  - 軽量モデルでコンテンツ要約を生成し、ペルソナに直接渡すよう修正
  - [レポート](file:///c:/Users/baken/OneDrive/デスクトップ/gradio_github/gradiotest/docs/reports/2026-01-06_watchlist_info_passthrough.md)
- [x] Web巡回ツールの全件巡回がペルソナに情報渡さないので無意味 ✅
  - 上記修正で対応済み（全件チェックでも定期巡回と同様にペルソナに情報を渡す）
- [x] 情景画像の表示ロジック見直し ✅
  - 季節より時間帯優先で検索するよう`find_scenery_image`を改善
  - [レポート](file:///c:/Users/baken/OneDrive/デスクトップ/gradio_github/gradiotest/docs/reports/2026-01-06_scenery_image_time_priority.md)

### 整理済み（2026-01-05）
- [x] 送信ログ「本日分」が一定量を超えたら直近数件残して要約する ✅
  - 状態: **実装済み**（閾値スライダー保存の軽微バグを修正）
- [x] ウォッチリストの定時巡回が発火しない問題 ✅
  - [レポート](file:///c:/Users/baken/OneDrive/デスクトップ/gradio_github/gradiotest/docs/reports/2026-01-05_scheduler_bugfixes.md)
- [x] 自律行動の間隔無視問題（呼び出し欠落 + キャッシュ同期問題） ✅
  - [レポート](file:///c:/Users/baken/OneDrive/デスクトップ/gradio_github/gradiotest/docs/reports/2026-01-05_scheduler_bugfixes.md)

### 整理済み（2026-01-04）
- [x] 世界設定保存時に通知がルーム名無しと有りで二つ出る ✅ (2026-01-03 修正完了)
- [x] 送信ログ「本日分」を修正したが問題解決していなかった ✅ (2026-01-03 修正完了)

- [x] 起動時に「個別設定を保存しました」と出てしまう ✅ (2026-01-03 修正完了)
- [x] 記憶想起、同じ内容が複数並んでる問題 → TASK_LIST（優先度: 中）へ移動
- [x] 検索精度アップ（URL表示問題） → TASK_LIST（優先度: 中）へ移動
- [x] 創作ノートのタイムスタンプ改良 → TASK_LIST（優先度: 高）へ移動
- [x] 自律行動時の記憶想起をオフに → TASK_LIST（優先度: 高）へ移動
- [x] 創作ノートの書き込み位置ミスなどの改善 ✅ (2026-01-02 修正完了)
- [x] ログ送信「本日分」の落とし穴 ✅ (2026-01-02 修正完了)
- [x] 自律行動の時間ランダム化 → TASK_LIST（優先度: 低）へ移動
- [x] エンティティ記憶の「キーワードシーディング」機能 → TASK_LIST（優先度: 低）へ移動

### 整理済み（2026-01-01）
- [x] 送信ログ件数に「本日分」追加 → TASK_LISTへ移動
- [x] エピソード記憶の注入にもっと短期間も追加 → TASK_LISTへ移動
- [x] 左カラムのスクロールが下まで出来ないときがある → TASK_LIST（優先度: クリティカル）へ移動
- [x] OpenAI互換のセーフティー等の設定 → TASK_LIST（優先度: 高）へ移動
- [x] 「お出かけ」中自律行動一時オフ機能 → TASK_LIST（優先度: 中）へ移動
- [x] お出かけエクスポートに最終閲覧・編集欄 → TASK_LIST（優先度: 中）へ移動
- [x] ナレッジの画像対応 → TASK_LIST（優先度: 中）へ移動
- [x] 画像生成にOpenAIモデルも使えるようにする → TASK_LIST（優先度: 中）へ移動

### 整理済み（2025-12-31）
- [x] Geminiの画像処理時の不思議な応答 → **原因特定**: 「リサイズ」という言葉がRAG検索でヒットし、関連発言を誘発していた。画像処理自体には問題なし。

### 整理済み（2025-12-30）
- [x] 縦長画面時に左右のカラムのつまみが重なり操作不能になる問題 → 修正完了
- [x] アバター画像・動画の機能強化 → **完了**（表情差分システム実装）
- [x] 画像を大きく表示する機能の検討 → TASK_LIST（優先度: 中）へ移動

### 整理済み（2025-12-29）
- [x] スマホ等縦長画面で右カラムがスクロールできず下部のメニューが操作できないときがある → TASK_LIST（優先度: クリティカル）へ移動
- [x] 起動時に「アバターモードを動画に変更しました」といちいち出てしまう → TASK_LIST（優先度: 中）へ移動
- [x] 情景画像が「毎ターン送信をオフ」にしても毎ターン送信されていた → **完了**（[レポート](file:///c:/Users/baken/OneDrive/デスクトップ/gradio_github/gradiotest/docs/reports/2025-12-29_scenery_image_sending_fix.md)）
- [x] 文字置き換え機能を使うと思考ログの表示が崩れる → **完了**（[レポート](file:///c:/Users/baken/OneDrive/デスクトップ/gradio_github/gradiotest/docs/reports/2025-12-29_redaction_thought_log_display_fix.md)）

---


## 関連リンク

- **ステータス**: [docs/STATUS.md](file:///c:/Users/baken/OneDrive/デスクトップ/gradio_github/gradiotest/docs/STATUS.md)
- **タスクリスト**: [docs/plans/TASK_LIST.md](file:///c:/Users/baken/OneDrive/デスクトップ/gradio_github/gradiotest/docs/plans/TASK_LIST.md)
- **開発サイクル**: `.agent/workflows/dev-cycle.md`
