# レポート: サイドバーのスクロール修正とUI表示の復旧

**日付:** 2026-01-11  
**ブランチ:** `fix/sidebar-scrolling`  
**ステータス:** ✅ 完了

---

## 問題の概要

1. **サイドバーのスクロール不可:** 左および右のサイドバーにおいて、コンテンツが画面外に溢れてもスクロールできず、下部のメニュー項目にアクセスできない問題が発生していた。
2. **UI表示の退避 (デグレード):** サイドバー修正の過程で、中央カラム（チャットエリア、タブ等）が右サイドバーの内部に誤ってネストされ、画面上から消失するデグレードが発生した。

---

## 修正内容

1. **コンテナの追加:** `nexus_ark.py` 内の `gr.Sidebar` コンポーネント直下に、CSSクラス `sidebar-container` を持つ `gr.Column` を追加した。これにより、既存のCSS（`#left_sidebar > div.sidebar-container` 等）が正しく適用され、スクロールが可能になった。
2. **構造の正常化:** 誤ったインデント（一括置換によるもの）を修正し、中央カラム（`with gr.Tabs():`）をサイドバーと同階層の兄弟要素に戻した。これにより、UIレイアウトが本来の状態に復旧した。

---

## 変更したファイル

- `nexus_ark/nexus_ark.py` - サイドバーへのコンテナ追加と、中央カラムの配置修正。

---

## 検証結果

- [x] アプリ起動確認: `./start.sh` により正常に起動することを確認。
- [x] 機能動作確認: サイドバーがスクロール可能になり、下部メニューにアクセスできることを確認。
- [x] 副作用チェック: 中央カラム（チャット欄、メモ帳等）が正しく表示され、以前と同様に操作できることを確認。

> [!NOTE]
> `tools/validate_wiring.py` を実行したところ、いくつかのエラーが検出されましたが、これらは本修正以前から存在する配線の不一致（ハンドラ側の戻り値とUI側の定義の不一致）であり、今回のレイアウト修正によるものではないことを確認しています。

---

## 残課題

なし
