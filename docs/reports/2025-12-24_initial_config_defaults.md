# 初期設定デフォルト値調整 完了レポート

**日付:** 2025-12-24  
**ブランチ:** `improve/initial-config-defaults`  
**ステータス:** ✅ 完了・マージ済み

---

## 問題の概要

GeminiAPIの無料枠が厳しくなったため、新規ルーム作成時のデフォルト設定をAPIコスト削減に最適化する必要があった。また、ルーム削除機能が動作しないバグも発見された。

---

## 修正内容

### 1. APIコンテキスト設定の初期値変更

| 設定項目 | 変更前 | 変更後 |
|----------|--------|--------|
| 送信履歴 | 全ログ | **20件** |
| エピソード記憶 | 過去2週間 | **無効（0日）** |
| 記憶の想起 | 有効 | **無効** |
| 思考過程をAPI送信 | オン | **オフ** |
| 温度 | 0.8 | **1.0** |
| 情景システム | 有効 | **無効** |

### 2. ルーム削除機能の修正

`room_manager.py` に `delete_room()` 関数が存在しなかったため追加。

---

## 変更したファイル

- `constants.py` - `DEFAULT_API_HISTORY_LIMIT_OPTION`, `DEFAULT_EPISODIC_MEMORY_DAYS` の値変更
- `config_manager.py` - `get_effective_settings()` のデフォルト値変更
- `ui_handlers.py` - UIデフォルト値のハードコード箇所を `constants` から動的取得に修正
- `room_manager.py` - `delete_room()` 関数を追加
- `docs/plans/TASK_LIST.md` - タスク完了マーク
- `docs/INBOX.md` - ルーム削除バグを修正済みに更新、通知重複問題を追加

---

## 検証結果

- ✅ アプリ起動確認
- ✅ 新規ルーム作成時のデフォルト値確認（20往復、エピソード記憶無効）
- ✅ ルーム削除動作確認

---

## 残課題

- [ ] 新規ルーム作成時の「個別設定を保存しました」通知が2回表示される問題（INBOXに記録済み）
