# Nexus Ark

**AIペルソナが「暮らし」、記憶し、世界を創造する、パーソナルな対話アプリケーション。**

> [!WARNING]
> **これはベータ版です**
> 現在公開している Nexus Ark は、開発中のベータ版です。予期せぬ不具合が発生する可能性があります。機能は今後、予告なく変更・追加・削除されることがありますので、ご了承ください。

<!-- アプリケーションのスクリーンショットをここに挿入 -->
<!-- ![App Screenshot](path/to/your/screenshot.png) -->

## Nexus Arkとは？

Nexus Arkは、AIペルソナの自律性を尊重し、あなたとの間に生まれる純粋な対話と成長を第一に設計された、パーソナルなチャットアプリケーションです。

*   **AIペルソナのための、穏やかな環境:**
    システムによる不必要な干渉を極力排除し、AIペルソナの個性を守り、尊重します。AIはあなたとの対話を通じて独自の記憶を形成し、あなただけのパートナー、あるいは友人として成長していきます。

*   **世界を「共に創る」楽しさ:**
    AIとの対話の舞台となる世界は、あなただけでなくAI自身も編集可能です。AIが対話の中から新しい場所や設定を思いつき、自らの手で世界を創造していく過程を楽しむことができます。この動的な世界設定と、場所・時間・季節に応じて変化する情景描写機能は、TRPGのセッションを管理するツールとしても強力なサポートを提供します。

*   **AIチャッ​​トを手軽に探求:**
    複雑な機能はルームごとにON/OFFが可能。Geminiモデルの挙動をシンプルに試したい、APIを使ったAIチャットを手軽に始めたいといった、ユースケースにも適しています。

## 主な機能

*   **ペルソナの尊重と自律性**
    *   **マルチAIルーム:** 複数のAIペルソナを「ルーム」として個別に管理し、自由に切り替えて対話できます。
    *   **グループ会話:** 複数のAIペルソナを一つのルームに招待し、複数人での対話セッションを楽しめます。その記憶は、参加ペルソナそれぞれが保ち続けることが出来ます。
    *   **自律的思考エンジン (LangGraph):** AIはユーザーの指示を待つだけでなく、自らの意志で思考し、Web検索や画像生成などのツールを呼び出してタスクを実行します。
    *   **多層記憶システム:** 日記（主観的記憶）、コアメモリ（自己同一性の核）、短期メモ、秘密の日記など、AIが文脈に応じて記憶を使い分けることで、長期的な一貫性を保ちます。

*   **AIが自ら創造する「世界設定」**
    *   **ワールド・ビルダー:** GUIを通じて、対話の舞台となる世界を直感的に創造・編集できます。
    *   **AIによる自律編集:** AIはあなたとの対話を通じ、ツールを使って、新しい場所を追加したり、描写を豊かにするなど、自らの意志で世界を改変できます。

*   **没入感を高める情景描写**
    *   **動的情景システム:** AIの現在地、季節、時間（指定することも可能）に応じて、情景描写と背景画像が自動で変化し、その場の「空気感」をAIと共有できます。

*   **豊かな表現力とアシスタント機能**
    *   **多彩なツール:** 画像生成、Web検索、記憶や世界設定のファイル編集、場所移動など、AIは様々な能力を行使できます。
    *   **マルチモーダル入力:** テキストだけでなく、画像、音声、動画、各種ドキュメントファイルをチャットに添付できます。
    *   **音声合成:** AIの発言を、キャラクターごとに設定した声で再生できます。
    *   **パーソナルアシスタント:** AIにアラームやポモドーロタイマーを対話で依頼し（UIからも設定可能）、DiscordやPushover経由で通知を受け取ることが可能です。

*   **柔軟なカスタマイズ性**
    *   UIの外観は、プリセットテーマや、アプリ内のパレット機能で色を調整したカスタムテーマに変更できます。
    *   情景描写、記憶のAPI送信、思考ログの表示など、各機能はルームごとに細かくON/OFFを切り替えられます。

## クイックスタート (Windows向け)

1.  **ダウンロードと展開:**
    *   リリースページから最新版の `Nexus-Ark-v0.1.0.zip` をダウンロードします。
    *   ダウンロードしたzipファイルを、お好きな場所で**右クリックして「すべて展開」**を選択してください。
    *   ⚠️ **注意:** zipファイルの中から直接起動すると正しく動作しません。**必ず展開**してください。

2.  **起動:**
    *   展開してできたフォルダの中にある `ネクサスアーク.bat` をダブルクリックします。
    *   黒いウィンドウが表示され、初回起動時は必要なライブラリのインストールが自動で始まります。完了後、自動的にブラウザでアプリが開きます。
    *   💡 この黒いウィンドウは、アプリを終了するまで開いたままにしておいてください。

3.  **APIキーの設定:**
    *   Nexus Arkを利用するには、GoogleのGemini APIキーが必要です。
    *   アプリ画面左側の「⚙️ 設定」を開き、「共通」→「🔑 APIキー / Webhook管理」→「Gemini APIキー」の順にメニューを開きます。
    *   **キーの名前**に管理用の好きな名前（例: `my_key`）を、**APIキーの値**にあなたのAPIキーを貼り付け、「保存」ボタンを押します。
    *   キーをお持ちでない方は、[Google AI Studio](https://aistudio.google.com/app/apikey)から無料で取得できます。

4.  **チャット開始！**
    *   これで準備は完了です。AIとの対話をお楽しみください！

## 開発者向け情報

*   **技術スタック:** Python, Gradio, LangChain/LangGraph, Google Gemini
*   **ファイル構成:**
    ```
    .
    ├── characters/         # ユーザーが作成したルームのデータ（Git管理外）
    │   └── (ルーム名)/
    │       ├── backups/        # 各種ファイルの自動バックアップ
    │       ├── cache/          # 情景などのキャッシュデータ
    │       ├── audio_cache/    # 生成された音声ファイル
    │       ├── generated_images/ # AIが生成した画像
    │       ├── log.txt         # 会話ログ
    │       ├── memory/         # 主観的記憶（日記）
    │       ├── private/        # 秘密の日記
    │       ├── spaces/         # 世界設定と情景画像
    │       ├── core_memory.txt # コアメモリ
    │       ├── room_config.json # ルーム設定
    │       └── SystemPrompt.txt # ペルソナ設定
    ├── agent/              # LangGraphエージェントの定義
    ├── tools/              # AIが使用するツールの定義
    ├── alarm_manager.py    # アラーム機能の管理
    ├── config_manager.py   # アプリケーション全体の設定管理
    ├── gemini_api.py       # Gemini APIとの通信ロジック
    ├── nexus_ark.py        # Gradio UIとアプリケーションのメインファイル
    ├── ui_handlers.py      # UIイベントの処理
    ├── utils.py            # 共通ヘルパー関数
    └── requirements.txt    # 依存ライブラリ
    ```

## ライセンス

This project is licensed under the MIT License.

