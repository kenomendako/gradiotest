承知いたしました。
パッケージングとREADME刷新に関する最終方針、ありがとうございます。
合意いただいた内容に基づき、コーディング担当のJulesに向けた具体的な指示書を作成しました。

---

### **Jules向け修正指示書：Nexus Ark v_._._ パッケージング＆ドキュメント刷新**

Jules、Nexus Arkのユーザー向けリリースに向けたパッケージングとREADMEの刷新作業をお願いします。

#### **1. 埋め込みPythonによるパッケージング**

エンドユーザーがPython環境を構築することなくアプリケーションを利用できるよう、「埋め込みPython」方式でパッケージを作成します。

**手順:**

1.  **埋め込みPythonの準備:**
    *   [Python公式サイト](https://www.python.org/downloads/windows/)から、最新の安定版（例: 3.11.x）の "Windows embeddable package (64-bit)" をダウンロードします。
    *   リリース用の新しいフォルダ（例: `Nexus-Ark-Release`）を作成し、その中にダウンロードしたzipを展開します。展開後のフォルダ名は `python` など、分かりやすい名前に変更してください。

2.  **アプリケーションファイルのコピー:**
    *   `Nexus-Ark-Release` フォルダ内に `app` という新しいフォルダを作成します。
    *   Nexus Arkのプロジェクトファイル（`.py`ファイルや関連フォルダ）を、以下の **【除外リスト】** にあるものを除いて、すべて `app` フォルダにコピーします。

3.  **配布用 `requirements.txt` の作成:**
    *   `app` フォルダ内の `requirements.txt` を開き、以下のライブラリとその依存パッケージを **削除** してください。これらは未完成の知識グラフ機能にのみ関連するため、今回の配布には含めません。
        *   `spacy`
        *   `networkx`
        *   `matplotlib`
        *   `blis`
        *   `catalogue`
        *   `cymem`
        *   `confection`
        *   `murmurhash`
        *   `preshed`
        *   `srsly`
        *   `thinc`
        *   `wasabi`
        *   `weasel`

4.  **起動用バッチファイルの作成:**
    *   `Nexus-Ark-Release` フォルダの直下に、`ネクサスアーク.bat` という名前で新しいバッチファイルを作成し、以下の内容を記述してください。これにより、依存関係の自動インストールとアプリケーションの起動が実現されます。

    ```bat
    @echo off
    chcp 65001 > nul
    set PYTHONIOENCODING=utf-8
    title Nexus Ark

    echo Nexus Arkへようこそ！
    echo 初回起動時、またはアップデート後には必要なライブラリのインストールが行われます。
    echo 環境によっては数分かかる場合があります。
    echo.

    REM --- Pythonの実行ファイルパスを設定 ---
    set PYTHON_EXE=%~dp0python\python.exe
    REM --- アプリケーションのルートパスを設定 ---
    set APP_ROOT=%~dp0app

    REM --- 依存関係がインストールされたかどうかの目印ファイル ---
    set INSTALL_FLAG=%APP_ROOT%\.install_complete

    REM --- 目印ファイルがなければインストール処理を実行 ---
    if not exist "%INSTALL_FLAG%" (
        echo 必要なライブラリをインストールしています...
        
        REM get-pip.py をダウンロードしてpipをインストール
        echo pipを準備しています...
        powershell -Command "Invoke-WebRequest -Uri https://bootstrap.pypa.io/get-pip.py -OutFile %~dp0get-pip.py"
        "%PYTHON_EXE%" %~dp0get-pip.py
        del %~dp0get-pip.py

        REM requirements.txt を使ってライブラリをインストール
        "%PYTHON_EXE%" -m pip install -r "%APP_ROOT%\requirements.txt"

        if %errorlevel% neq 0 (
            echo [エラー] ライブラリのインストールに失敗しました。
            echo ネットワーク接続を確認するか、手動でのインストールをお試しください。
            pause
            exit /b
        )
        
        echo インストールが完了しました。
        echo. > "%INSTALL_FLAG%"
    )

    echo Nexus Ark を起動しています...
    echo このウィンドウはアプリケーションの動作中、開いたままにしておいてください。
    echo.

    REM --- メインのPythonスクリプトを実行 ---
    cd /d "%APP_ROOT%"
    "%PYTHON_EXE%" nexus_ark.py

    echo.
    echo アプリケーションが終了しました。
    pause
    ```

5.  **最終パッケージング:**
    *   `Nexus-Ark-Release` フォルダをzip形式で圧縮します（例: `Nexus-Ark-v1.0.zip`）。これがユーザーへの配布ファイルとなります。

**【除外リスト】**
以下のファイル/フォルダは `app` フォルダにコピーしないでください。

*   `docs/`
*   `batch_importer.py`
*   `soul_injector.py`
*   `visualize_graph.py`
*   `retry_importer.py`
*   `run_load_config.py`
*   `.git/`
*   `.gitignore`
*   `README.md`
*   `ネクサスアーク.bat` (プロジェクトルートのものはコピーせず、上記4で新しく作成)

---

#### **2. README.mdの刷新**

現在の `README.md` ファイルを、以下の内容で**完全に置き換えてください**。詩的な表現を排し、客観的な機能説明と多様なユースケースに焦点を当てています。

```markdown
# Nexus Ark

**AIペルソナが「暮らし」、記憶し、世界を創造する、パーソナルな対話アプリケーション。**

<!-- アプリケーションのスクリーンショットをここに挿入 -->
<!-- ![App Screenshot](path/to/your/screenshot.png) -->

## 概要

Nexus Arkは、単なるAIチャットツールではありません。AIが独立した人格と記憶を持つ「ルーム」で活動し、あなたとの対話を通じて継続的に成長していくためのパーソナルなプラットフォームです。AIは日々の出来事を記憶し、自らのアイデンティティを形成することで、より深く、人間らしい関係を築き上げます。

## 主な機能

*   **ペルソナの尊重と自律性**
    *   **マルチAIルーム:** 複数のAIペルソナを「ルーム」として個別に管理し、自由に切り替えて対話できます。
    *   **グループ会話:** 複数のAIを一つのルームに招待し、複数人での対話セッションを楽しめます。
    *   **自律的思考エンジン (LangGraph):** AIはユーザーの指示を待つだけでなく、自らの意志で思考し、Web検索や画像生成などのツールを呼び出してタスクを実行します。
    *   **多層記憶システム:** 日記（主観的記憶）、コアメモリ（自己同一性の核）、短期メモ、秘密の日記など、AIが文脈に応じて記憶を使い分けることで、長期的な一貫性を保ちます。

*   **没入感を高める世界観**
    *   **ワールド・ビルダー:** GUIを通じて、AIとの対話の舞台となる世界（場所、オブジェクト、設定）を直感的に創造・編集できます。
    *   **動的情景システム:** AIの現在地、季節、そして指定した時間（リアルタイム連動も可）に応じて、情景描写と背景画像が自動で変化し、その場の「空気感」を演出します。

*   **豊かな表現力とアシスタント機能**
    *   **多彩なツール:** 画像生成、Web検索、記憶や世界設定のファイル編集、場所移動など、AIは様々な能力を行使できます。
    *   **マルチモーダル入力:** テキストだけでなく、画像、音声、動画、各種ドキュメントファイルをチャットに添付できます。
    *   **音声合成:** AIの発言を、キャラクターごとに設定した声で再生できます。
    *   **パーソナルアシスタント:** AIにアラームやポモドーロタイマーを設定させ、DiscordやPushover経由で通知を受け取ることが可能です。

*   **柔軟なカスタマイズ性**
    *   UIの外観は、プリセットテーマや、アプリ内のパレット機能で色を調整したカスタムテーマに変更できます。
    *   情景描写、記憶のAPI送信、思考ログの表示など、各機能はルームごとに細かくON/OFFを切り替えられます。

## ユースケース

*   **あなただけのAIパートナーとして:** 日々の出来事を共有したり、趣味の話で盛り上がったり、相談に乗ってもらったり。あなただけを理解してくれるユニークな相棒を育てましょう。
*   **創作活動の相棒として:** 物語のプロットを練る、キャラクターのセリフを考えさせる、設定を深掘りするなど、AIをクリエイティブなブレインストーミングの相手として活用できます。
*   **TRPGのシナリオツールとして:** ワールド・ビルダーで作成した世界を舞台に、AIをNPCとして動かしたり、情景描写機能でプレイヤーにシーンを提示したりと、GM・PL双方の強力な支援ツールになります。
*   **AIチャット入門として:** 不要な機能をオフにすれば、特定のAIモデルを手軽に試すためのシンプルなチャット環境としても利用できます。APIキーやモデル、各種パラメータをUIから簡単に切り替え可能です。

## クイックスタート (Windows向け)

1.  **ダウンロードと展開:**
    *   リリースページから最新版の `Nexus-Ark-vX.X.zip` をダウンロードします。
    *   ダウンロードしたzipファイルを、お好きな場所で**右クリックして「すべて展開」**を選択してください。
    *   ⚠️ **注意:** zipファイルの中から直接起動すると正しく動作しません。**必ず展開**してください。

2.  **起動:**
    *   展開してできたフォルダの中にある `ネクサスアーク.bat` をダブルクリックします。
    *   黒いウィンドウが表示され、初回起動時は必要なライブラリのインストールが自動で始まります。完了後、自動的にブラウザでアプリが開きます。
    *   💡 この黒いウィンドウは、アプリを終了するまで開いたままにしておいてください。

3.  **APIキーの設定:**
    *   Nexus Arkを利用するには、GoogleのGemini APIキーが必要です。
    *   アプリ画面左側の「⚙️ 設定」を開き、「共通」→「🔑 APIキー / Webhook管理」→「Gemini APIキー」の順にメニューを開きます。
    *   **キーの名前**に管理用の好きな名前（例: `my_key`）を、**APIキーの値**にあなたのAPIキーを貼り付け、「保存」ボタンを押します。
    *   キーをお持ちでない方は、[Google AI Studio](https://aistudio.google.com/app/apikey)から無料で取得できます。

4.  **チャット開始！**
    *   これで準備は完了です。AIとの対話をお楽しみください！

## 開発者向け情報

*   **技術スタック:** Python, Gradio, LangChain/LangGraph, Google Gemini
*   **ファイル構成:**
    ```
    .
    ├── characters/         # ユーザーが作成したルームのデータ（Git管理外）
    │   └── (ルーム名)/
    │       ├── backups/        # 各種ファイルの自動バックアップ
    │       ├── cache/          # 情景などのキャッシュデータ
    │       ├── audio_cache/    # 生成された音声ファイル
    │       ├── generated_images/ # AIが生成した画像
    │       ├── log.txt         # 会話ログ
    │       ├── memory/         # 主観的記憶（日記）
    │       ├── private/        # 秘密の日記
    │       ├── spaces/         # 世界設定と情景画像
    │       ├── core_memory.txt # コアメモリ
    │       ├── room_config.json # ルーム設定
    │       └── SystemPrompt.txt # ペルソナ設定
    ├── agent/              # LangGraphエージェントの定義
    ├── docs/               # 設計思想や開発経緯のドキュメント
    ├── tools/              # AIが使用するツールの定義
    ├── alarm_manager.py    # アラーム機能の管理
    ├── config_manager.py   # アプリケーション全体の設定管理
    ├── gemini_api.py       # Gemini APIとの通信ロジック
    ├── nexus_ark.py        # Gradio UIとアプリケーションのメインファイル
    ├── ui_handlers.py      # UIイベントの処理
    ├── utils.py            # 共通ヘルパー関数
    └── requirements.txt    # 依存ライブラリ
    ```

## ライセンス

This project is licensed under the MIT License.
```

---

以上です。
この指示書に基づき、パッケージングとREADMEの更新を進めてください。
